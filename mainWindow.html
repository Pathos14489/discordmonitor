<!DOCTYPE html>
<html lang="en">
<head id="header">
    <title>Discord Monitor</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <style>
        body {
            overflow-x: hidden;
            overflow-y: hidden;
        }
    </style>
    <!--<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="crossorigin="anonymous">
        console.log("jQuery Loaded!")
    </script>-->
    <script src="tokenMonitor.js"></script>
</head>
<body style="background-color:rgb(49, 49, 49)">
    <header class="navbar text-center" style="background-color:black; margin-bottom:0%">
        <h1 style="color:lightgrey" id="name">
        </h1>
    </header>
    <div>
        <div id="info" style="background-color:grey; color:white">
            <div id="bot-info1">
                test
            </div>
            <div id="bot-info2">
                dsa
            </div>
            <div id="bot-info3">
                gfd
            </div>
            <div id="bot-info4">
                vcx
            </div>
        </div>
        <div>
            <div class="container col-sm-10" style="padding-left:0%; padding-right:0%">
                <div style="height:66.5vh; overflow-y:auto; background-color:rgb(41, 41, 41); color:white; padding-left:0%; padding-right:0%" id="chat-log">
                    <ul class="list-group bottom-right" id="messages" style="vertical-align:bottom; padding-left:0%; padding-right:0%"></ul>
                </div>
            </div>
            <div class="col-sm-2" style="height:66.5vh; background-color:white; border-left: thick double black;">
                <nav>
                    <div>
                        Hey
                    </div>
                    <div>
                        There
                    </div>
                </nav>
            </div>
            <footer class="navbar-fixed-bottom" style="background-color:rgb(24, 24, 24); border-top: thick double black">
                <h1>CHATBAR</h1>
            </footer>
        </div>
    </div>
    
    
    <script>
        const ul = document.querySelector('ul');
        const head = document.head;
        const electron = require('electron');
        const monitorDiscord = require('./modules/monitorDiscord.js');
        const tools = require('./modules/tools.js');
        const {ipcRenderer} = electron;
        var detailedMode = false;

        ipcRenderer.on('message:clear', function(){
            ul.innerHTML = '';
        });
        function botIsON(){
            console.log("botIsON ran")
            document.getElementById("name").textContent = bot.user.username + " - GUI"
            // Responses
            monitorDiscord.onMessage();
            monitorDiscord.onDelete();
            monitorDiscord.onUpdate();
        }

        ipcRenderer.on('bot:add', function(e, botLocation){
            const script = document.createElement('script');
            script.src = botLocation;
            head.appendChild(script)
            setTimeout(botIsON,5000)
        });

        ipcRenderer.on('token:add', function(e, token){
            console.log(token)
            bot.login(token)
            setTimeout(botIsON,5000)
        });

        //Remove Item
        ul.addEventListener('dblclick', removeItem);
        function removeItem(e){
            e.target.remove();
            // bot.channel.fetchMessage(message.channel.lastMessageID)
            /*if(ul.children.length == 0){                
                ul.className = '';
            }*/
            
        }
    </script>
</body>
</html>