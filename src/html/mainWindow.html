<!DOCTYPE html>
<html lang="en" style="height:100%">
<head id="header">
    <title>Token Client</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/mainWindow.css">
    <!--<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="crossorigin="anonymous">
        console.log("jQuery Loaded!")
    </script>-->
    <script id="loaded"></script>
</head>
<body>
    <header class="navbar text-center">
        <h1 style="color:lightgrey" id="name"></h1>
    </header>
    <div id="info">
        <div id="bot-info1">
            test
        </div>
        <div id="bot-info2">
            dsa
        </div>
        <div id="bot-info3">
            gfd
        </div>
        <div id="bot-info4">
            vcx
        </div>
    </div>
    <div id="chatbox-and-control-panel">
        <div id="chatbox" class="container col-sm-11">
            <div id="chat-log">
                <ul class="list-group" id="messages"></ul>
            </div>
        </div>
        <div id="control-panel" class="col-sm-1">
            <form>
                <button type="toggle"><img id="power" src="./../../assets/red-button.png"></button>
            </form>
        </div>
    </div>

    <footer id="footer" class="navbar-fixed-bottom">
        <input type="text" id="chatbar-text-form" style="width:80%" autofocus>
        <h1>Hey there</h3>
    </footer>
    
    <script>
        const ul = document.querySelector('ul');
        const head = document.head;
        const electron = require('electron');
        const {ipcRenderer} = electron;
        const monitorDiscord = require('./../monitorDiscord.js');
        const tools = require('./../tools.js');
        var tokenReply = false;
        var detailedMode = false;

        tools.errorCheck()

        ipcRenderer.on('message:clear', function(){
            ul.innerHTML = '';
        });

        function botActivate(){
            document.getElementById("name").textContent = bot.user.username + " - GUI"
            monitorDiscord.monitor(bot.user.username);
            tools.output("Bot Monitoring Active!")
        }
        function tokenMonitorOn(token){
            tools.createBot(token);
        }

        ipcRenderer.on('bot:add', function(e, botLocation){
            const script = document.createElement('script');
            script.src = botLocation;
            tools.output("Bot.js File Loaded...")
            head.appendChild(script)
        });
        ipcRenderer.on('error:sent', function(e, errObj){
            tools.output("ERROR:"+errObj.event+"   ("+errObj.source+":"+errObj.lineno+")", "error")
        });

        ipcRenderer.on('token:add', function(e, token){
            if(tokenReply == true){
                tools.output("Using token: "+token)
            }
            setTimeout(tokenMonitorOn(token),5000)
        });

        function messageSent(e){
            e.preventDefault();
            const token = document.querySelector('#token-get').value;
        }
        //Remove Item
        /*ul.addEventListener('dblclick', removeItem);
        function removeItem(e){
            e.target.remove();
            // bot.channel.fetchMessage(message.channel.lastMessageID)
            if(ul.children.length == 0){                
                ul.className = '';
            }
            
        }*/
    </script>
</body>
</html>